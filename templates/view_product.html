{% extends "base.html" %}
{% block title %}ìƒí’ˆ ìƒì„¸ë³´ê¸°{% endblock %}
{% block content %}
<h2>{{ product.title | e}}</h2>

{% if product.image_path %}
    <img src="{{ url_for('static', filename=product.image_path) }}" alt="ìƒí’ˆ ì´ë¯¸ì§€" width="300">
{% endif %}

<p>ì„¤ëª…: <br>{{ product.description | e}}</p>
<p>ê°€ê²©: {{ product.price | e}}</p>
<p>íŒë§¤ì:
    {% if seller %}
      <a href="{{ url_for('view_user_profile', user_id=seller.id) }}">{{ seller.username | e}}</a>
    {% else %}
      ì•Œ ìˆ˜ ì—†ìŒ
    {% endif %}
</p>

{% if product.is_sold %}
  <button disabled>íŒë§¤ ì™„ë£Œ</button>
{% elif product.seller_id == session['user_id'] %}
  <button disabled>ë‚´ ìƒí’ˆì…ë‹ˆë‹¤</button>
{% else %}
  <a href="{{ url_for('purchase', product_id=product.id) }}"><button>ê²°ì œí•˜ê¸°</button></a>
{% endif %}

{% if session.get('user_id') == product.seller_id %}
  <a href="{{ url_for('edit_product', product_id=product.id) }}">âœï¸ ìˆ˜ì •</a>

  <form action="{{ url_for('delete_product', product_id=product.id) }}" method="POST" style="display:inline;">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <button type="submit" onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ğŸ—‘ï¸ ì‚­ì œ</button>
  </form>
{% endif %}

<a href="{{ url_for('report', target_id=product.id) }}">
    <button style="background-color: red; color: white;">ğŸš¨ ì´ ìƒí’ˆ ì‹ ê³ í•˜ê¸°</button>
  </a>

{% endblock %}
